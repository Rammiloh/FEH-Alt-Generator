
<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/FEH-Alt-Generator/assets/css/style.css?v=8bc45d64c9c0ed235811c433a275f64430b963ee">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Welcome to GitHub Pages | FEH-Alt-Generator</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Welcome to GitHub Pages" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Generate random seasonal alts for Fire Emblem Heroes" />
<meta property="og:description" content="Generate random seasonal alts for Fire Emblem Heroes" />
<link rel="canonical" href="https://rammiloh.github.io/FEH-Alt-Generator/" />
<meta property="og:url" content="https://rammiloh.github.io/FEH-Alt-Generator/" />
<meta property="og:site_name" content="FEH-Alt-Generator" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Welcome to GitHub Pages" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Generate random seasonal alts for Fire Emblem Heroes","headline":"Welcome to GitHub Pages","name":"FEH-Alt-Generator","url":"https://rammiloh.github.io/FEH-Alt-Generator/"}</script>
<!-- End Jekyll SEO tag -->

    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/FEH-Alt-Generator/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          
            <a id="forkme_banner" href="https://github.com/Rammiloh/FEH-Alt-Generator">View on GitHub</a>
          

          <h1 id="project_title">FEH-Alt-Generator</h1>
          <h2 id="project_tagline">Generate random seasonal alts for Fire Emblem Heroes</h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2 id="welcome-to-github-pages">Welcome to my fuckin alt generator</h2>

<p>You can use the <a href="https://github.com/Rammiloh/FEH-Alt-Generator/edit/gh-pages/index.md">editor on GitHub</a> to maintain and preview the content for your website in Markdown files.</p>

	      <div id="generatedUnit" class="px-3 py-3"></div>
	      <div id="generatedTitle" class="my-3"></div>
	      <div id="generatedClass" class="my-3"></div>
	      <div id="generatedStats" class="my-3"></div>
<p>Your Pages site will use the layout and styles from the Jekyll theme you have selected in your <a href="https://github.com/Rammiloh/FEH-Alt-Generator/settings/pages">repository settings</a>. The name of this theme is saved in the Jekyll <code class="language-plaintext highlighter-rouge">_config.yml</code> configuration file.</p>

<h3 id="support-or-contact">Support or Contact</h3>

<p>Having trouble with Pages? Check out our <a href="https://docs.github.com/categories/github-pages-basics/">documentation</a> or <a href="https://support.github.com/contact">contact support</a> and weâ€™ll help you sort it out.</p>

        
        <script>
var charactersJSON;
var themesJSON;
var skillsJSON;
var statsJSON;
var conditionsJSON;
var effectsJSON;

function ChooseRandom(list) //Get a random item from the list
{
	return list[Math.floor(Math.random() * list.length)];
}
function GetRandom(min, max) //Get random integer between min and max, inclusive
{
	return Math.floor(Math.random() * (max - min + 1)) + min;
}
		
//I could make both of these into JSONs too but can't be fucked since they're so small
const moveTypes = [
	{
		Movement: "Infantry",
		Tag: "Inf",
		Index: 0
	},
	{
		Movement: "Armored",
		Tag: "Arm",
		Index: 1
	},
	{
		Movement: "Cavalry",
		Tag: "Cav",
		Index: 2
	},
	{
		Movement: "Flier",
		Tag: "Fly",
		Index: 3
	}
];

const weaponTypes = [
	{
		Weapon: "Sword",
		Tags: ["Red","Close","Melee"],
		Index: 0
	},
	{
		Weapon: "Lance",
		Tags: ["Blue","Close","Melee"],
		Index: 0
	},
	{
		Weapon: "Axe",
		Tags: ["Green","Close","Melee"],
		Index: 0
	},
	{
		Weapon: "Dragon",
		Tags: ["Random","Close","Dragon"],
		Index: 4
	},
	{
		Weapon: "Beast",
		Tags: ["Random","Close","Beast"],
		Index: 5
	},
	{
		Weapon: "Tome",
		Tags: ["Random","Tome","Ranged"],
		Index: 1
	},
	{
		Weapon: "Bow",
		Tags: ["Random","Bow","Missile","Ranged"],
		Index: 2
	},
	{
		Weapon: "Dagger",
		Tags: ["Random","Dagger","Missile","Ranged"],
		Index: 2
	},
	{
		Weapon: "Staff",
		Tags: ["Colorless","Staff","Ranged"],
		Index: 3
	}
];

async function getJSON(jsonFile) {
return fetch(jsonFile)
	.then((response)=>response.json())
	.then((responseJson)=>{return responseJson});
}
async function caller(jsonFile) {
	var json = await this.getJSON(jsonFile);
	return json;
}

async function loadAllJSONs(){
	console.log("Characters");
	charactersJSON = await caller("./Characters.json");
	console.log("SeasonalThemes");
	themesJSON = await caller("./SeasonalThemes.json");
	console.log("Skills");
	skillsJSON = await caller("./Skills.json");
	console.log("Classes");
	statsJSON = await caller("./Classes.json");
	console.log("WeaponConditions");
	conditionsJSON = await caller("./WeaponConditions.json");
	console.log("WeaponEffects");
	effectsJSON = await caller("./WeaponEffects.json");

}
		
//=================================GENERATE CHARACTER================================
		
function GenerateCharacter(theme,game)
{
	console.log("Checkpoint1");
	hero = ChooseRandom(charactersJSON);
	if(game != "") //If a game is given as a parameter, we only want characters from said game
	{
		//This is bad and should be rewritten
		while(game != hero.Game)
			hero = ChooseRandom(charactersJSON);
	}
	
	console.log("Checkpoint2");
	//The character's name and subtitle get separated here, so we can manipulate the title without affecting the name
	heroName = hero.Hero.substring(0,hero.Hero.indexOf(":"));
	heroTitle = hero.Hero.substring(hero.Hero.indexOf(":")+2).split(" ");
	
	if(Math.random() > 0.5) //Choose either to use a prefix for a suffix for the seasonal title
	{
		if(heroTitle.length > 1)
		{
			var suffix = ChooseRandom(theme.Suffixes);
			//Check if the second word in the base subtitle is a two letter word, usually "of"
			//If it is, we don't want to use a subtitle that has a space in it since those are usually formatted as "of <PLACE/TIME>"
			//We don't want something like "Hero of of Beach"
			while(heroTitle[heroTitle.length-2].length == 2 && suffix.includes(" ")) 
				suffix = ChooseRandom(theme.Suffixes);
			//Create the new title
			heroTitle.splice(heroTitle.length-1,1,suffix);
		}
		else //If the subtitle is only a single word long, we can just attach the suffix with no issue
			heroTitle.splice(heroTitle.length-1,0,ChooseRandom(theme.Suffixes));
	}
	else
	{
		if(heroTitle.length > 1)
		{
			//Check if the second word in the base subtitle is a two letter word, usually "of"
			//If it is, we choose to put a suffix at the start of the subtitle instead of a prefix so it can make grammatical sense
			if(heroTitle[1].length == 2)
				heroTitle.splice(0,1,ChooseRandom(theme.Suffixes));
			else
				heroTitle.splice(0,1,ChooseRandom(theme.Prefixes));
		}
		else //If the subtitle is only a single word long, we can just attach the prefix with no issue
			heroTitle.splice(0,0,ChooseRandom(theme.Prefixes));
	}

	console.log(heroName + ": " + heroTitle.join(" "));
	var fullTitle = heroName + ": " + heroTitle.join(" ");
	var mvmnt = ChooseRandom(moveTypes);
	var wpn = weaponTypes[ChooseRandom([0,1,2,5,6,7,8])];
	if(hero.Race == "Dragon" && Math.random() > 0.3) wpn = weaponTypes[3];
	if(hero.Race == "Beast" && Math.random() > 0.3) wpn = weaponTypes[4];
	
	if(wpn.Tags[0] == "Random")
		wpn.Tags[0] = ChooseRandom(["Red","Blue","Green","Colorless"]);
	var gennedCharacter = {
		Title: fullTitle,
		Filename: hero.Filename,
		Movement: mvmnt,
		Weapon: wpn
	}
	return gennedCharacter;
}
		
//=================================GENERATE CLASS================================

function RandomiseGrowths(growths,numberOfIterations)
{
	while(numberOfIterations>0)
	{
		var minusStat = ChooseRandom([0,1,2,3,4]);
		var plusStat = ChooseRandom([0,1,2,3,4]);
		while(plusStat == minusStat) plusStat = ChooseRandom([0,1,2,3,4]);
		var subtraction = Math.random()*growths[minusStat];
		console.log(minusStat + " - " + subtraction + " + " + plusStat);
		growths[minusStat] -= subtraction;
		growths[plusStat] += subtraction;
		numberOfIterations -= 1;
	}
	return growths;
}
		
function GenerateStats(character)
{
	var wpnIndex = character.Weapon.Index;
	var mvmIndex = character.Movement.Index;
	
	var classIndex = wpnIndex + (mvmIndex*6);
	var thisClass = statsJSON[classIndex];
	
	let sum = 0;

	for (let i = 0; i < thisClass.MinStats.length; i++) {
		sum += thisClass.MinStats[i];
	}
	var points = ChooseRandom(thisClass.BST) - sum;
	var rates = [0,0,0,0,0];
	var stats = thisClass.MinStats;
	var ratesMax = 0;
	for (let i = 0; i < rates.length; i++) {
		rates[i] = thisClass.MaxStats[i] - thisClass.MinStats[i];
		ratesMax += rates[i];
	}
	for (let i = 0; i < rates.length; i++) {
		rates[i] = rates[i]/ratesMax;
	}
	console.log(thisClass.Weapon + "/" + thisClass.Class + ": " + rates);


	rates = RandomiseGrowths(rates,5);

	if(thisClass.Weapon == "Melee" && thisClass.Class == "Armor")
	{
		//Arden's HP is a statistical outlier, so we have to cut Armored Melee units' HP growth in half to compensate
		var subtraction = Math.random()*rates[0]/2;
		rates[0] -= subtraction;
		rates[ChooseRandom([1,2,3,4])] += subtraction;
		console.log("Reduced HP growth by " + subtraction);
	}
	console.log(thisClass.Weapon + "/" + thisClass.Class + ": " + rates);

	for (let i = 1; i < rates.length; i++) {
		rates[i] = rates[i] + rates[i-1];
	}
	console.log(thisClass.Weapon + "/" + thisClass.Class + ": (adjusted) " + rates);

	while(points > 0)
	{
		chosenStat = Math.random();
		for (let i = 0; i < rates.length; i++) {
			if(chosenStat < rates[i] && stats[i] < thisClass.MaxStats[i]) 
			{
				stats[i] += 1;
				points -= 1;
				break;
			}
		}
	}
	console.log(thisClass.Weapon + "/" + thisClass.Class + ": " + stats);
	return stats;
}	
		
async function RunGenerator()
{
	await loadAllJSONs();
	var theme = ChooseRandom(themesJSON);
	console.log("~" + theme.Event + "~");
	var game = ChooseRandom(["FE1","FE2","FE4","FE5","FE6","FE7","FE8","FE9","FE10","FE13","FE14","FE16","FE0","FEE"]);
	var character = GenerateCharacter(theme,game);
	var stats = GenerateStats(character);
	document.getElementById("generatedUnit").innerHTML = `  <div id="charImage"> <img src="./CharacterIcons/${character.Filename}" /> </div>`;
	document.getElementById("generatedTitle").innerHTML = `${character.Title}`;
	document.getElementById("generatedClass").innerHTML = `${character.Weapon.Weapon} ${character.Movement.Movement}`;
	document.getElementById("generatedStats").innerHTML = `${stats}`;
}
RunGenerator();
  /*function GetRandom(min, max) 
{
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
  //var chars = [];
  var json = [];
  async function getJSON() {
    return fetch("./Characters.json")
        .then((response)=>response.json())
        .then((responseJson)=>{return responseJson});
  }
  async function caller() {
    json = await this.getJSON();  // command waits until completion
    console.log(json[0].Filename);            // hello is now available
    document.getElementById("generatedUnit").innerHTML = `  <div id="charImage"> <img src="./CharacterIcons/${json[0].Filename}" /> </div>`;
  }
  caller();*/
  
  
        </script>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">FEH-Alt-Generator maintained by <a href="https://github.com/Rammiloh">Rammiloh</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
  </body>
</html>
